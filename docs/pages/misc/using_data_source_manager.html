<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using the Data Source Manager with WFS and WMS – sdgistud</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-08799928d293638fe9563d5c5a2794e5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">sdgistud</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/software_and_tools.html"> 
<span class="menu-text">Software and Tools</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-learn-qgis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Learn QGIS</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-learn-qgis">    
        <li>
    <a class="dropdown-item" href="../../pages/installation_setup/install_qgis.html">
 <span class="dropdown-text">Installation and setup</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/getting_started.html">
 <span class="dropdown-text">Getting started with QGIS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/cartography_and_mapping/cartographic_principles.html">
 <span class="dropdown-text">Cartography and mapping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/density_analysis/land_cover_density_in_grid.qmd">
 <span class="dropdown-text">Density analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/landscape_analysis/terrain_data.html">
 <span class="dropdown-text">Landscape analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-learn-r" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Learn R</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-learn-r">    
        <li>
    <a class="dropdown-item" href="https://carpentries-incubator.github.io/r-geospatial-urban/">
 <span class="dropdown-text">Rbanism Geospatial Data Carpentry</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://carpentries-incubator.github.io/r-geospatial-urban/">
 <span class="dropdown-text">Join the Rbanism #30daysmapchallenge</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-courses-and-workshops" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Courses and Workshops</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-courses-and-workshops">    
        <li class="dropdown-header">IOP1 -</li>
        <li class="dropdown-header">WV5 -</li>
        <li class="dropdown-header">MSc Urbanism Q1 - GIS workshop</li>
        <li>
    <a class="dropdown-item" href="../../courses/mscu_q2.html">
 <span class="dropdown-text">MSc Urbanism Q2 - GIS workshop</span></a>
  </li>  
        <li class="dropdown-header">MSc Urbanism Q3 - GIS workshop</li>
        <li class="dropdown-header">ARFW0501 - Applied Spatial Analytics for Sustainable Futures</li>
        <li class="dropdown-header">DISSUF MSc Urbanism Graduation Cluster</li>
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../pages/find_data.html"> 
<span class="menu-text">Find Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contact.qmd"> 
<span class="menu-text">Contact us</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contribute.qmd"> 
<span class="menu-text">Contribute</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://twitter.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://code.com">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://bugs.com">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="ca87ad3b719b7710ec1bcbd277d43888" class="alert alert-primary hidden"><i class="bi bi-info-circle quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p><strong>Alert</strong> - this website is still under construction. Some content could not be still available, or out of date.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#steps" id="toc-steps" class="nav-link" data-scroll-target="#steps">Steps</a>
  <ul class="collapse">
  <li><a href="#part-1-setting-up-your-project-and-retrieving-neighbourhood-data" id="toc-part-1-setting-up-your-project-and-retrieving-neighbourhood-data" class="nav-link" data-scroll-target="#part-1-setting-up-your-project-and-retrieving-neighbourhood-data">Part 1: Setting Up Your Project and Retrieving Neighbourhood Data</a></li>
  <li><a href="#part-2-connecting-to-wfs-for-climate-adaptation-data" id="toc-part-2-connecting-to-wfs-for-climate-adaptation-data" class="nav-link" data-scroll-target="#part-2-connecting-to-wfs-for-climate-adaptation-data">Part 2: Connecting to WFS for Climate Adaptation Data</a></li>
  <li><a href="#part-3-connecting-to-wms-for-background-imagery" id="toc-part-3-connecting-to-wms-for-background-imagery" class="nav-link" data-scroll-target="#part-3-connecting-to-wms-for-background-imagery">Part 3: Connecting to WMS for Background Imagery</a></li>
  </ul></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  <li><a href="#extension-activities-optional" id="toc-extension-activities-optional" class="nav-link" data-scroll-target="#extension-activities-optional">Extension Activities (Optional)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using the Data Source Manager with WFS and WMS</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>Duration:</strong> ~20 minutes</p>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning Goals
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of this exercise, you will be able to:</p>
<ul>
<li>Navigate and use the QGIS Data Source Manager</li>
<li>Connect to and load WFS (Web Feature Service) layers from Dutch data portals</li>
<li>Connect to and load WMS (Web Map Service) layers from Dutch data portals</li>
<li>Understand the difference between WFS and WMS services</li>
<li>Save connections for future use</li>
<li>Perform basic geoprocessing operations (selection, clipping, dissolve, buffer)</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Software and Plugins Required
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>QGIS</strong> (version 3.x or higher)</li>
<li><strong>PDOK Services Plugin</strong> for QGIS</li>
<li>Active internet connection</li>
</ul>
</div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this exercise, you will learn how to connect to external geospatial data sources using QGIS’s Data Source Manager. You’ll work with real Dutch open data, combining different data layers to create a focused analysis area around Rotterdam neighbourhoods.</p>
<p>You will retrieve neighbourhood boundaries via WFS, perform spatial operations to create a study area, and then use this area to clip climate adaptation data. Finally, you’ll add aerial imagery via WMS to visualize your results.</p>
<p>This workflow demonstrates a common GIS task: defining a study area, retrieving relevant data, and preparing it for analysis.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is WFS?
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>WFS (Web Feature Service)</strong> provides access to <strong>vector data</strong> (points, lines, polygons) that you can query, style, analyze, and edit in QGIS. Think of it as downloading the actual geographic features with all their attributes. WFS is ideal when you need to perform spatial analysis or select specific features.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is WMS?
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>WMS (Web Map Service)</strong> provides access to <strong>pre-rendered map images</strong> - essentially picture tiles of maps. You cannot query individual features or access attributes, but WMS layers load quickly and are perfect for background/reference maps. Think of it as viewing a map image rather than working with the data itself.</p>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Differences Between WFS and WMS
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>WFS</th>
<th>WMS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data type</td>
<td>Vector (features)</td>
<td>Raster (images)</td>
</tr>
<tr class="even">
<td>File size</td>
<td>Can be large</td>
<td>Smaller</td>
</tr>
<tr class="odd">
<td>Queryable</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>Stylable in QGIS</td>
<td>Yes</td>
<td>Limited</td>
</tr>
<tr class="odd">
<td>Editable</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>Best for</td>
<td>Analysis, editing, selection</td>
<td>Background maps, visualization</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="steps" class="level2">
<h2 class="anchored" data-anchor-id="steps">Steps</h2>
<section id="part-1-setting-up-your-project-and-retrieving-neighbourhood-data" class="level3">
<h3 class="anchored" data-anchor-id="part-1-setting-up-your-project-and-retrieving-neighbourhood-data">Part 1: Setting Up Your Project and Retrieving Neighbourhood Data</h3>
<ol type="1">
<li><p>Open QGIS and create a new project</p></li>
<li><p>Set the project CRS (Coordinate Reference System) to <strong>EPSG:28992</strong> (Amersfoort / RD New - the Dutch standard projection)</p>
<ul>
<li>Go to <code>Project</code> &gt; <code>Properties</code> &gt; <code>CRS</code></li>
<li>Search for “28992” and select “Amersfoort / RD New”</li>
<li>Click <code>OK</code></li>
</ul></li>
<li><p>Using the PDOK Services plugin, retrieve data via WFS of this dataset:</p>
<ul>
<li>Open the PDOK Services Plugin (look for the PDOK icon in the toolbar or go to <code>Web</code> &gt; <code>PDOK Services Plugin</code>)</li>
<li>In the plugin window, search for “CBS Wijken en Buurten 2024”</li>
<li>Select the <strong>WFS</strong> option (not WMS!)</li>
<li>Choose the layer: <code>cbs_buurten_2024</code> (neighbourhoods)</li>
<li>Click to add it to your map</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please pay attention to retrieve the correct data, as there are many buurten layers, both for WFS and WMS! What you need is a <strong>vector layer</strong> containing all 14,668 buurten (neighbourhoods) in the Netherlands. After loading, check the feature count in the layer properties to confirm you have the complete dataset.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../..\images/misc/placeholder_ss.png" class="img-fluid figure-img"></p>
<figcaption>Figure 1 - PDOK Services Plugin showing CBS Buurten 2024 WFS</figcaption>
</figure>
</div></li>
<li><p>You must now select only the 6 buurten that obey to these criteria:</p>
<ul>
<li>They belong to the municipality of Rotterdam (<code>gemeentenaam</code> = “Rotterdam”) <strong>AND</strong></li>
<li>Their name (<code>buurtnaam</code>) is one of the following: “Blijdorp”, “Centrum”, “Cool”, “Dijkzigt”, “Nieuwe Werk”, “Oude Westen”</li>
</ul>
<p><strong>To select these neighbourhoods:</strong></p>
<ul>
<li>Open the attribute table (right-click on layer &gt; <code>Open Attribute Table</code>)</li>
<li>Click on <code>Select features using an expression</code> (the yellow icon with ε)</li>
<li>Enter this expression:</li>
</ul>
<pre><code>"gemeentenaam" = 'Rotterdam' AND 
"buurtnaam" IN ('Blijdorp', 'Centrum', 'Cool', 'Dijkzigt', 'Nieuwe Werk', 'Oude Westen')</code></pre>
<ul>
<li>Click <code>Select Features</code></li>
<li>Verify that 6 features are selected (shown at the top of the attribute table)</li>
</ul>
<p><strong>Now save the selected features:</strong></p>
<ul>
<li>Right-click on the layer &gt; <code>Export</code> &gt; <code>Save Selected Features As...</code></li>
<li>Format: <code>GeoPackage</code></li>
<li>File name: Navigate to folder <code>part1_data</code> and name it <code>buurten.gpkg</code></li>
<li>Layer name: <code>buurten</code></li>
<li>CRS: <code>EPSG:28992</code></li>
<li>Before saving, we need to add the area calculation and drop unwanted columns:
<ul>
<li>Click on the fields list and uncheck all columns except:
<ul>
<li><code>buurtnaam</code> (name of the neighbourhood)</li>
<li><code>buurtcode</code> (code of the neighbourhood)</li>
<li><code>gemeentenaam</code> (name of the municipality)</li>
</ul></li>
</ul></li>
<li>Click <code>OK</code> to save</li>
</ul>
<p><strong>Add the area column:</strong></p>
<ul>
<li>Open the attribute table of the newly saved <code>buurten</code> layer</li>
<li>Enable editing mode (click the pencil icon)</li>
<li>Open the Field Calculator (Ctrl+I or click the abacus icon)</li>
<li>Check <code>Create a new field</code></li>
<li>Output field name: <code>buurt_area</code></li>
<li>Output field type: <code>Decimal number (real)</code></li>
<li>Precision: 2</li>
<li>In the expression box, enter: <code>round($area, 2)</code></li>
<li>Click <code>OK</code></li>
<li>Save edits and disable editing mode</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../..\images/misc/placeholder_ss.png" class="img-fluid figure-img"></p>
<figcaption>Figure 2 - Selected Rotterdam neighbourhoods with area calculation</figcaption>
</figure>
</div></li>
<li><p>Dissolve now the geometries of the 6 buurten:</p>
<ul>
<li>Go to <code>Vector</code> &gt; <code>Geoprocessing Tools</code> &gt; <code>Dissolve</code></li>
<li>Input layer: <code>buurten</code></li>
<li>Leave “Dissolve field(s)” empty (this will dissolve all features into one)</li>
<li>Click <code>Run</code></li>
<li>After the temporary layer is created, right-click on it &gt; <code>Export</code> &gt; <code>Save Features As...</code></li>
<li>Format: <code>GeoPackage</code></li>
<li>File name: Select the existing <code>buurten.gpkg</code> file</li>
<li>Layer name: <code>buurten_dissolved</code></li>
<li>In the fields section, uncheck all attributes</li>
<li>Click <code>OK</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../..\images/misc/placeholder_ss.png" class="img-fluid figure-img"></p>
<figcaption>Figure 3 - Dissolved neighbourhood boundary</figcaption>
</figure>
</div></li>
<li><p>Compute the bounding box/extents of <code>buurten_dissolved</code>:</p>
<ul>
<li>Go to <code>Vector</code> &gt; <code>Research Tools</code> &gt; <code>Extract layer extent</code></li>
<li>Input layer: <code>buurten_dissolved</code></li>
<li>Click <code>Run</code></li>
<li>Export this layer to the GeoPackage:
<ul>
<li>Right-click &gt; <code>Export</code> &gt; <code>Save Features As...</code></li>
<li>File name: Select <code>buurten.gpkg</code></li>
<li>Layer name: <code>bbox</code></li>
<li>Keep only columns: <code>minx</code>, <code>miny</code>, <code>maxx</code>, <code>maxy</code></li>
<li>Click <code>OK</code></li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../..\images/misc/placeholder_ss.png" class="img-fluid figure-img"></p>
<figcaption>Figure 4 - Bounding box of the study area</figcaption>
</figure>
</div></li>
<li><p>Finally, compute a buffer of 200 m around the bbox layer:</p>
<ul>
<li>Go to <code>Vector</code> &gt; <code>Geoprocessing Tools</code> &gt; <code>Buffer</code></li>
<li>Input layer: <code>bbox</code></li>
<li>Distance: <code>200</code> (meters)</li>
<li>End cap style: <code>Flat (The end cap style parameter controls how line endings are handled in the buffer.)</code></li>
<li>Join style: <code>Miter</code></li>
<li>Click <code>Run</code></li>
<li>Export the result to the GeoPackage:
<ul>
<li>Right-click on the buffered layer &gt; <code>Export</code> &gt; <code>Save Features As...</code></li>
<li>File name: Select <code>buurten.gpkg</code></li>
<li>Layer name: <code>bbox_buffered</code></li>
<li>Uncheck all attributes in the fields section</li>
<li>Click <code>OK</code></li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../..\images/misc/placeholder_ss.png" class="img-fluid figure-img"></p>
<figcaption>Figure 5 - 200m buffer around bounding box</figcaption>
</figure>
</div></li>
</ol>
</section>
<section id="part-2-connecting-to-wfs-for-climate-adaptation-data" class="level3">
<h3 class="anchored" data-anchor-id="part-2-connecting-to-wfs-for-climate-adaptation-data">Part 2: Connecting to WFS for Climate Adaptation Data</h3>
<ol start="8" type="1">
<li><p>Open the <strong>Data Source Manager</strong></p>
<ul>
<li>Click the “Open Data Source Manager” button in the toolbar, OR</li>
<li>Go to <code>Layer</code> &gt; <code>Data Source Manager</code>, OR</li>
<li>Press <code>Ctrl+L</code></li>
</ul></li>
<li><p>Select the <strong>WFS / OGC API - Features</strong> tab on the left</p></li>
<li><p>Create a new WFS connection to Zuid-Holland climate data:</p>
<ul>
<li>Click <code>New</code> to create a new connection</li>
<li><strong>Name:</strong> Zuid-Holland Climate Adaptation</li>
<li><strong>URL:</strong> <code>https://geodata.zuid-holland.nl/geoserver/klimaat/wfs?service=WFS&amp;version=2.0.0&amp;request=GetCapabilities</code></li>
<li>Click <code>OK</code></li>
</ul></li>
<li><p>Load a WFS layer:</p>
<ul>
<li>Select the “Zuid-Holland Climate Adaptation” connection and click <code>Connect</code></li>
<li>Wait for the available layers to load</li>
<li>Find and select <code>klimaat:klimaatpanden_2022</code> (Basiskaarten klimaatadaptatie panden - wateroverlast, hitte en biodiversiteit 2022)</li>
<li>Click <code>Add</code> at the bottom</li>
<li>Click <code>Close</code></li>
</ul></li>
<li><p>Clip the layer to your study area:</p>
<ul>
<li>Go to <code>Vector</code> &gt; <code>Geoprocessing Tools</code> &gt; <code>Clip</code></li>
<li>Input layer: <code>klimaat:klimaatpanden_2022</code> (the climate buildings layer)</li>
<li>Overlay layer: <code>bbox_buffered</code></li>
<li>Click <code>Run</code></li>
<li>This will create a new layer containing only the climate data within your buffered study area</li>
<li>You can now remove the original (unclipped) WFS layer to improve performance</li>
</ul></li>
<li><p>Explore the layer:</p>
<ul>
<li>Zoom to your study area (the Rotterdam neighbourhoods you selected)</li>
<li>Notice that buildings are vector features you can select and query</li>
<li>Open the attribute table (right-click layer &gt; <code>Open Attribute Table</code>)</li>
<li>Explore the climate adaptation attributes like water overlay risk, heat stress, and biodiversity scores</li>
</ul></li>
</ol>
</section>
<section id="part-3-connecting-to-wms-for-background-imagery" class="level3">
<h3 class="anchored" data-anchor-id="part-3-connecting-to-wms-for-background-imagery">Part 3: Connecting to WMS for Background Imagery</h3>
<p><strong>What is WMS?</strong> WMS provides access to pre-rendered map images - like a background map. You cannot query individual features, but it loads faster for large areas.</p>
<ol start="14" type="1">
<li><p>Open the <strong>Data Source Manager</strong> again (<code>Ctrl+L</code>)</p></li>
<li><p>Select the <strong>WMS / WMTS</strong> tab on the left</p></li>
<li><p>Create a new WMS connection:</p>
<ul>
<li>Click <code>New</code> to create a new connection</li>
<li><strong>Name:</strong> PDOK Aerial Photos</li>
<li><strong>URL:</strong> <code>https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0?request=GetCapabilities&amp;service=wmts</code></li>
<li>Click <code>OK</code></li>
</ul></li>
<li><p>Load a WMS layer:</p>
<ul>
<li><p>Select the “PDOK Aerial Photos” connection and click <code>Connect</code></p></li>
<li><p>Select <code>Luchtfoto 2025 Ortho 25cm RGB</code> (current high-resolution aerial photos. Please select <code>EPSG:28992</code>)</p></li>
<li><p>Click <code>Add</code></p></li>
<li><p>Click <code>Close</code></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Important</strong>: Before retrieving it, you should first zoom to the <em>bbox_buffered</em> layer, in order to automatically reduce the size of the data to be retrieved.</p>
</div>
</div></li>
</ul></li>
<li><p>Save a local copy of the orthophoto. Please save it into folder \part1_data. Select the orthophoto layer name, right click on it and choose Export\Save As…</p>
<p>In the resulting dialog GUI, choose/set the following parameters</p>
<ul>
<li><p>Output mode: <code>Raw data</code></p></li>
<li><p>Format: <code>GeoTIFF</code>. <strong>Important</strong>: Uncheck “Create VRT”!</p></li>
<li><p>File name: <strong>ortho_25cm.tif</strong>. Save the file in folder <code>\raster</code></p></li>
<li><p>CRS: <code>EPSG:28992</code></p></li>
<li><p>When it comes to the extents, set them to be taken from the <code>bbox_buffered</code> layer.</p></li>
<li><p>Resolution: <code>0.25 m</code> for both horizontal and vertical.</p></li>
</ul></li>
<li><p>Arrange your layers:</p>
<ul>
<li>In the Layers panel, drag layers so the order from top to bottom is:
<ol type="1">
<li><code>buurten</code> (neighbourhood boundaries)</li>
<li>Clipped climate buildings layer</li>
<li><code>bbox_buffered</code> (buffer outline)</li>
<li><code>Luchtfoto 2025 Ortho 25cm RGB</code> (aerial photos - at the bottom)</li>
</ol></li>
<li>Adjust the transparency of the buildings layer if needed (Right-click &gt; <code>Properties</code> &gt; <code>Symbology</code> &gt; <code>Layer Rendering</code> &gt; adjust opacity slider)</li>
<li>Style the neighbourhood boundaries with a bold outline and no fill to see the aerial photo underneath</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p><strong>What you’ve learned:</strong></p>
<ul>
<li>The <strong>Data Source Manager</strong> is your central hub for connecting to external data sources in QGIS</li>
<li><strong>WFS</strong> provides vector data that you can style, query, and analyze - great for operational data and spatial analysis</li>
<li><strong>WMS</strong> provides raster map images - great for background maps and visualization</li>
<li>How to use the <strong>PDOK Services Plugin</strong> to easily access Dutch open geospatial data</li>
<li>Basic <strong>geoprocessing workflows</strong>: selection, dissolve, buffer, and clip operations</li>
<li>How to organize and save multiple layers in a <strong>GeoPackage</strong> for efficient data management</li>
<li>Dutch <strong>PDOK</strong> (Publieke Dienstverlening Op de Kaart) offers free, reliable geospatial web services</li>
<li>Provincial and municipal data portals (like Zuid-Holland) provide specialized datasets</li>
<li>Saved connections can be reused in future projects</li>
</ul>
<p><strong>Key differences between WFS and WMS:</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Feature</th>
<th>WFS</th>
<th>WMS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data type</td>
<td>Vector (features)</td>
<td>Raster (images)</td>
</tr>
<tr class="even">
<td>File size</td>
<td>Can be large</td>
<td>Smaller</td>
</tr>
<tr class="odd">
<td>Queryable</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="even">
<td>Stylable in QGIS</td>
<td>Yes</td>
<td>Limited</td>
</tr>
<tr class="odd">
<td>Best for</td>
<td>Analysis, editing</td>
<td>Background maps</td>
</tr>
</tbody>
</table>
<p><strong>Useful Dutch Data Portals:</strong></p>
<ul>
<li><strong>PDOK:</strong> https://www.pdok.nl/ (national geospatial infrastructure)</li>
<li><strong>Data.overheid.nl:</strong> Open data from Dutch government</li>
<li><strong>Nationaal Georegister:</strong> https://www.nationaalgeoregister.nl/ (search for geospatial services)</li>
<li>Most Dutch provinces and municipalities also offer their own WFS/WMS services</li>
</ul>
<hr>
</section>
<section id="extension-activities-optional" class="level2">
<h2 class="anchored" data-anchor-id="extension-activities-optional">Extension Activities (Optional)</h2>
<ul>
<li>Explore other PDOK services at https://www.pdok.nl/datasets</li>
<li>Try filtering WFS layers using the Data Source Manager’s “SQL” or “Filter” options</li>
<li>Analyze the climate adaptation scores in your selected Rotterdam neighbourhoods</li>
<li>Compare different neighbourhoods’ vulnerability to heat, water, or biodiversity loss</li>
<li>Add the RIVM Energy Labels WMS (<code>https://data.rivm.nl/geo/nl/wms?request=GetCapabilities</code>, layer <code>rvo_energielabels</code>) to see building energy performance</li>
<li>Create a styled map showing the relationship between neighbourhood characteristics and climate risks</li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, SDGIS-BK@tudelft.nl</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>